# 7. 测试策略

## 7.1 单元测试 (Vitest)
- 对非UI的纯逻辑、工具函数、Hooks编写单元测试。
- AI应能为这些函数自动生成测试骨架。

## 7.2 组件测试 (React Testing Library)
- 对UI组件进行测试，核心是模拟用户交互，断言UI变化，而不是测试组件的内部实现。
- AI生成的组件测试应包含：基础渲染测试、用户交互（点击、输入）测试、Props变化测试。

## 7.3 E2E测试 (Playwright)
- 仅用于测试最关键的用户流程（如登录、注册、创建订单）。
- 在UI或流程发生重大变更后，才触发E2E测试。 

## 7.4 性能测试与优化

### 7.4.1 自动化性能检测
- **构建时性能分析**：集成Webpack Bundle Analyzer，自动分析打包体积
- **运行时性能监控**：使用Web Vitals API收集核心性能指标(LCP, FID, CLS)
- **阈值警报系统**：当性能指标超过预设阈值时（如LCP>2.5s），自动发出警报

### 7.4.2 AI性能优化策略
- **代码分割优化**：AI检测到大型组件或页面时，自动应用React.lazy和Suspense
- **渲染优化**：检测到不必要的重渲染时，自动应用React.memo、useMemo和useCallback
- **资源优化**：自动检测并优化大型图片、未压缩资源等

- [Performance Warning] 中列出了所有性能问题，要解决。