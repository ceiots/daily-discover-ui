# Daily Discover 前端统一开发规范 v3.0

## 0. 文档引言

本文档是 "Daily Discover" 前端项目的**唯一官方开发规范**。旨在为所有开发者（包括人类与AI）提供一套清晰、统一、可执行的指导原则，以支撑项目在**高并发、高性能、高可用、高可扩展**背景下的快速、高质量迭代。

**所有开发活动，无论是功能实现、代码重构还是AI辅助编程，都必须严格遵守本规范。**

---

## 1. 核心设计原则与目标

- **MVP原则 (Minimum Viable Product)**: 始终聚焦核心业务闭环，优先交付最大化价值的功能，快速验证市场反馈。
- **大厂标准**: 参考阿里、腾讯、字节跳动等一线互联网公司的最佳实践，构建企业级前端应用。
- **四高目标**:
    - **高并发**: 优化请求管理与数据缓存，支撑千万级DAU。
    - **高性能**: 极致的加载与渲染优化，首屏时间 < 1.5s。
    - **高可用**: 完善的错误处理、降级方案与监控告警，确保系统稳定性。
    - **高可扩展**: 采用微前端思想与插件化设计，适应未来业务的快速扩张。
- **逻辑与视图分离**: 这是我们架构的核心哲学，所有组件必须将UI（视图）与业务逻辑（Hooks）彻底分离，以提升复用性和可维护性。
- **AI驱动开发**: 本规范为AI高效、自主地进行开发提供清晰的指令集，最大化自动化程度。

---

## 2. 文档索引

为了方便查阅，完整的开发规范已被拆分为多个文档。请访问 [文档中心](./00_INDEX.md) 查看所有文档的索引。

---

## 3. 前后端交互数据规范

为了确保前后端协作的顺畅与高效，前端开发必须严格遵循后端定义的 [API 设计指南与安全规范](../daily-discover-server/docs/03_BACKEND_DEVELOPMENT/04_API_DESIGN_GUIDELINES.md)。本节将重点强调前端在数据交互中的关键职责和处理原则。

-   **统一接口约定**: 前端必须以后端 API 设计指南为基准，理解并消费其定义的 RESTful 接口、HTTP 方法、请求参数、响应结构、错误码等。

-   **数据格式与类型**: 
    -   所有前后端交互数据均采用 **JSON 格式** (`application/json`)。
    -   前端需注意后端 [API 设计指南](../daily-discover-server/docs/03_BACKEND_DEVELOPMENT/04_API_DESIGN_GUIDELINES.md#14-数据格式与类型规范) 中对数据类型的明确约定，特别是：
        -   **ID 和大数值**: 对于后端作为 `Long` 类型传输的 ID 或其他大数值（例如订单号、用户ID），前端在 JavaScript 环境中接收时可能会面临精度丢失问题。因此，后端会将其转换为**字符串**传输。前端在处理这类数据时，应始终将其视为字符串类型，避免进行数字运算，并在需要展示时直接使用。
        -   **日期与时间**: 前端接收到的日期和时间字符串必须是 **ISO 8601 格式**。前端应使用 `Date` 对象或其他日期处理库（如 `moment.js` 或 `date-fns`）进行解析和格式化，以适应用户本地时区和显示需求。
        -   **枚举**: 后端返回的枚举值为具有业务含义的**字符串**（如 `"PENDING"`）。前端应基于这些字符串进行业务逻辑判断和界面展示，避免依赖数字编码。
        -   **可空性**: 前端在处理来自后端的数据时，必须充分考虑字段的**可空性**。对于后端可能返回 `null` 的字段，前端应进行安全性检查，并提供合理的默认值或错误处理机制，以防止 UI 渲染异常或程序崩溃。

-   **统一响应处理**: 前端所有 API 请求的响应都必须通过统一的拦截器或处理逻辑进行解析。特别是对于后端定义的统一 `Result` 对象：
    -   **状态码 (code)**: 前端应根据后端返回的 `code` 业务状态码进行统一的业务判断和流程控制。例如，`2xxxx` 表示成功，`4xxxx` 表示客户端错误（如参数错误、未登录），`5xxxx` 表示服务器错误。针对不同错误码，前端应触发相应的错误提示（如 Toast、Modal）或页面跳转（如登录过期）。
    -   **消息 (message)**: 用于向用户展示的提示信息。
    -   **数据 (data)**: 实际的业务数据。前端应根据 API 契约解析其内部结构。如果后端推荐了 [JSON:API](https://jsonapi.org/)，前端应采用对应的解析库或逻辑来处理 JSON:API 格式的数据结构。
    -   **链路追踪 (traceId)**: 对于错误请求，前端应记录或向用户展示 `traceId`，以便于后端快速定位问题。

-   **请求头与认证**: 前端在发送需要认证的请求时，必须在 `Authorization` 请求头中携带有效的 JWT Token (Bearer 方式)。前端应实现 Token 的存储、刷新和过期处理机制，确保用户会话的连续性。

-   **错误与异常处理**: 前端应建立健壮的全局错误处理机制，捕获 API 请求中的网络错误、HTTP 状态码错误和后端业务错误。对于非预期错误，应进行日志上报和用户友好提示。前端展示的错误信息应避免暴露后端技术细节。 